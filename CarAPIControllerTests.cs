using CarRent.Controllers;
using CarRent.Repositories;
using Microsoft.AspNetCore.Mvc;
using Moq;


public class CarAPIControllerTests
{
    private readonly Mock<ICarRepository> _carRepositoryMock;
    private readonly CarAPIController _controller;

    public CarAPIControllerTests()
    {
        _carRepositoryMock = new Mock<ICarRepository>();
        _controller = new CarAPIController(_carRepositoryMock.Object);
    }

    [Fact]
    public async Task GetAllCars_ReturnsOkResult_WithListOfCars()
    {
        var carDtos = new List<CarDto>
        {
            new CarDto { Id = 1, Make = "Toyota", Model = "Camry", Year = 2021, PricePerDay = 100, IsAvailable = true },
            new CarDto { Id = 2, Make = "Honda", Model = "Civic", Year = 2020, PricePerDay = 80, IsAvailable = true }
        };
        _carRepositoryMock.Setup(repo => repo.GetAllCarsAsync()).ReturnsAsync(carDtos);

        var result = await _controller.GetAllCars();

        var okResult = Assert.IsType<OkObjectResult>(result);
        var returnValue = Assert.IsType<List<CarDto>>(okResult.Value);
        Assert.Equal(2, returnValue.Count);
    }

    [Fact]
    public async Task GetCarById_CarExists_ReturnsOkResult_WithCar()
    {
        var carDto = new CarDto { Id = 1, Make = "Toyota", Model = "Camry", Year = 2021, PricePerDay = 100, IsAvailable = true };
        _carRepositoryMock.Setup(repo => repo.GetCarByIdAsync(1)).ReturnsAsync(carDto);

        var result = await _controller.GetCarById(1);

        var okResult = Assert.IsType<OkObjectResult>(result);
        var returnValue = Assert.IsType<CarDto>(okResult.Value);
        Assert.Equal(carDto.Id, returnValue.Id);
    }

    [Fact]
    public async Task GetCarById_CarDoesNotExist_ReturnsNotFound()
    {
        _carRepositoryMock.Setup(repo => repo.GetCarByIdAsync(1)).ReturnsAsync((CarDto)null);

        var result = await _controller.GetCarById(1);

        Assert.IsType<NotFoundResult>(result);
    }

    [Fact]
    public async Task AddCar_InvalidModelState_ReturnsBadRequest()
    {
        _controller.ModelState.AddModelError("Make", "Required");

        var result = await _controller.AddCar(new CarDto());

        Assert.IsType<BadRequestObjectResult>(result);
    }

    [Fact]
    public async Task AddCar_ValidCar_ReturnsNoContent()
    {
        var carDto = new CarDto
        {
            Id = 1,
            Make = "Toyota",
            Model = "Camry",
            Year = 2021,
            PricePerDay = 100,
            IsAvailable = true,
            Images = new List<string> { "data:image/jpeg;base64,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" }
        };

        var result = await _controller.AddCar(carDto);

        Assert.IsType<NoContentResult>(result);
        _carRepositoryMock.Verify(repo => repo.AddCarAsync(carDto), Times.Once);
    }

    [Fact]
    public async Task UpdateCar_IdMismatch_ReturnsBadRequest()
    {
        var carDto = new CarDto { Id = 2, Make = "Toyota", Model = "Camry" };
        var result = await _controller.UpdateCar(1, carDto);

        Assert.IsType<BadRequestObjectResult>(result);
    }

    [Fact]
    public async Task UpdateCar_ValidCar_ReturnsNoContent()
    {
        var carDto = new CarDto
        {
            Id = 1,
            Make = "Toyota",
            Model = "Camry",
            Year = 2021,
            PricePerDay = 100,
            IsAvailable = true,
            Images = new List<string> { "data:image/jpeg;base64,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" }
        };

        _carRepositoryMock.Setup(repo => repo.UpdateCarAsync(carDto)).Returns(Task.CompletedTask);

        var result = await _controller.UpdateCar(1, carDto);

        Assert.IsType<NoContentResult>(result);
        _carRepositoryMock.Verify(repo => repo.UpdateCarAsync(carDto), Times.Once);
    }
}
